{% extends 'two_factor/_base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
{% block page_content %}
<div class="up-title">
    <h1 class="custom-header">Setup Two-Factor Authentication</h1>
</div>
{% include 'authentication/navbar.html' %}
		<div class="custom-container">
		
		<p>To enhance the security of your account, we recommend setting up two-factor authentication (2FA).</p>
		
		<h2 class="step-header">Step 1: Scan the QR Code</h2>
		<p>Use an authenticator app like Google Authenticator or Authy to scan the QR code below.</p>
		
		<div class="qr-code">
			<img src="{{ qr_url }}" alt="QR Code for 2FA Setup" class="qr-image">
		</div>
				
		<h2 class="step-header">Step 2: Enter the Verification Code</h2>
		<p>After scanning the QR code, enter the code generated by your authenticator app below:</p>
		
		<form id="otp-form" action="{% url 'redirect_to_2fa_setup' %}" method="post" class="custom-form">
			{% csrf_token %}
			
			<div class="form-group hidden">
				<label for="otp_device" class="custom-label">Select OTP Device:</label>
				{{ form.otp_device|add_class:"custom-input" }}
			</div>
			
			<div class="form-group">
				<label for="otp_token" class="custom-label">OTP Token:</label>
				{{ form.otp_token|add_class:"custom-input" }}
			</div>
			
			<div id="error-message" class="custom-error">
				{% if form.errors %}
					{% for error in form.non_field_errors %}
						{{ error }}
					{% endfor %}
				{% endif %}
			</div>
			
			<button type="submit" class="custom-button">Verify</button>
		</form>
	</div>
    {% endblock %}
{% endblock %}
